# Local Development

### 0. Prerequisites
- Docker - [Install Docker](https://docs.docker.com/engine/install/)
- Kotlin 1.8.10^ - [Install Kotlin](https://kotlinlang.org/docs/command-line.html)
- Java 17^ - [Install Java](https://www.oracle.com/java/technologies/downloads/)
- Postgres - [Install Postgres](https://www.postgresql.org/download/) or use the provided docker-compose file
- Kafka and Zookeeper - [Install Kafka](https://kafka.apache.org/quickstart) or use the provided docker-compose file
- Gradle - [Install Gradle](https://gradle.org/install/)

### 1. Setting up Kafka's cluster
It's mandatory to have a running Kafka cluster in order to run the system. The easiest way to do so is by using this custom script which provides a docker-compose file that can be used to spin up a Kafka cluster with all the needed services. [Kafka Cluster](./local/kafka/README.md)

> Note: This script works only on Arm64 based machines ATM, if you're using a different architecture, you can use omit the `ghcr.io/arm64-compat/` prefix from the image names in the `docker-compose.yaml` file.


### 2. Setting up the database
The system uses a Postgres database to store its data. The easiest way to set it up is by using the provided docker-compose file. [Postgres](./local/database/postgres.yaml) 

```bash
docker-compose -f ./local/database/postgres.yaml up -d
```

### 2. Building and Running from source
For building the services from source, you can use the provided gradle wrapper. The following command will build all the services and their dependencies.

```bash
./gradlew clean build
```
then you can run the services using the following command in the respective service's `main` directory:
```bash
./gradlew :<service-name>:bootRun
```


### 3. Building from K8s

TBD...